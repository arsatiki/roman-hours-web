<!doctype html>
<html>
<head>
<style type="text/css">
#clock { 
	border: 1px solid black;
	border-radius: 50%;

	margin: 10px auto;
	width: 300px;
	height: 300px;
	
	position: relative;
}

#clock img {
	-webkit-transition: -webkit-transform 1s linear 0s;
	-webkit-transform-origin: 32px 32px;
	-webkit-transform: scale(0.01, 0.01);
	position: relative;
	left: 118px;
	top: 118px;
}
</style>
<script src="sun.js" type="application/javascript"></script>
<script type="application/javascript">

var TAU = 2 * Math.PI;

var latitude = 41.9, longitude = 12.5;

if ("geolocation" in navigator) {
	navigator.geolocation.watchPosition(function(pos){
		latitude = pos.coords.latitude;
		longitude = pos.coords.longitude;
		tick();
	});
}

function angle(hour) {
	return TAU * hour / 12;
}

function setHand(hour) {
	var a = angle(hour);
	var h = document.getElementById('hand');
	h.style.WebkitTransform = "scale(0.225, 0.225) rotate(" + a + "rad)";
}

function tick() {
	var period = compute_period(latitude, longitude);
	var hour = 12 * (Date.now() - period.start) / period.duration;
	console.log("Setting hour to " + hour);
	setHand(hour);
}

document.addEventListener('DOMContentLoaded', tick, false);
setInterval(tick, 60000);


</script>
</head>
<body>

<div id="clock">
<img id="hand" src="clockhand.png">
</div>
</body>
</html>