<!doctype html>
<html>
<head>
<style type="text/css">
#clock { 
	border: 1px solid black;
	border-radius: 50%;

	margin: 100px auto;
	width: 300px;
	height: 300px;
	
	position: relative;
}

#clock img {
	-webkit-transition: -webkit-transform 1s linear 0s;
	-webkit-transform-origin: 32px 32px;
	-webkit-transform: scale(0.01, 0.01);
	position: relative;
	left: 118px;
	top: 118px;
}
</style>
<script src="sun.js" type="application/javascript"></script>
<script type="application/javascript">
/* TODO: 
- location to localstorage
- update location with geolocation api
- sync time over the internet?

*/

var TAU = 2 * Math.PI;

var latitude = 60.1708, longitude = 24.9375;

function angle(hour) {
	return TAU * hour / 12;
}

function setHand(hour) {
	var a = angle(hour);
	var h = document.getElementById('hand');
	h.style.WebkitTransform = "scale(0.225, 0.225) rotate(" + a + "rad)";
}

function tick() {
	var now = Date.now() / 1000;
	prev_event = 1351353012;
	next_event = 1351373012;
	var hour = 12 * (next_event - now) / (next_event - prev_event);
	console.log("Setting hour to " + hour);
	setHand(hour);
}

setTimeout(tick, 100);
setInterval(tick, 60000);


</script>
</head>
<body>

<div id="clock">
<img id="hand" src="clockhand.png">
</div>
</body>
</html>